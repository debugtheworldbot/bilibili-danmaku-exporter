# B 站弹幕导出工具 [弹幕]

将 B 站视频弹幕转换为 ASS 字幕文件，支持本地播放器（IINA、Infuse、PotPlayer 等）。

![B 站弹幕导出工具界面](./screenshot-hero.png)

## 功能特性

采用字体排印粗野主义设计，提供强大的弹幕导出功能。支持解析 BV 号、AV 号、完整 URL 和番剧链接，自动获取视频信息并转换弹幕为 ASS 字幕格式。智能轨道分配算法确保弹幕不重叠，支持滚动、顶部、底部三种弹幕类型。提供丰富的自定义选项，包括字体、字号、透明度、持续时间和覆盖范围（全屏、1/2 屏幕、1/4 屏幕）。分辨率预设支持 1080p、2K、4K，无需登录即可使用全部功能。

## 快速开始

访问在线工具或本地部署后，只需三步即可导出弹幕：

**步骤 1**：粘贴 B 站视频链接（支持普通视频和番剧）到输入框，点击获取视频信息。

**步骤 2**：根据需要调整弹幕参数，选择合适的分辨率、字体、覆盖范围等选项。

**步骤 3**：点击导出弹幕按钮，下载生成的 ASS 文件，将其与视频文件放在同一目录下，使用本地播放器打开即可看到弹幕效果。

## 技术栈

前端采用 React 19 + TypeScript + Tailwind CSS 4 + shadcn/ui 构建现代化界面。后端使用 Express 4 + tRPC 11 提供类型安全的 API 接口。数据库采用 MySQL 配合 Drizzle ORM 进行数据管理。整体架构确保了类型安全、开发效率和运行性能的平衡。

## 本地开发

```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 运行测试
pnpm test

# 构建生产版本
pnpm build
```

## 支持的链接格式

工具支持多种 B 站链接格式，包括 BV 号（如 `BV1xx411c7mD`）、AV 号（如 `av170001`）、完整视频 URL（如 `https://www.bilibili.com/video/BV1xx411c7mD`）和番剧链接（如 `https://www.bilibili.com/bangumi/play/ep331044`）。系统会自动识别链接类型并提取必要的视频 ID 信息。

## 弹幕参数说明

**分辨率**：选择与视频匹配的分辨率预设，支持 1080p（1920×1080）、2K（2560×1440）、4K（3840×2160）三种常用规格。

**字体**：设置弹幕显示字体，默认使用 Arial，可根据播放器支持情况选择其他字体。

**字号**：调整弹幕文字大小，范围 10-100，默认 25。

**透明度**：设置弹幕不透明度，范围 0-100%，默认 80%。

**滚动持续时间**：控制滚动弹幕从右到左的移动时间，单位秒，默认 5 秒。

**静止持续时间**：设置顶部和底部弹幕的显示时间，单位秒，默认 5 秒。

**覆盖范围**：限制弹幕显示区域，支持全屏、1/2 屏幕、1/4 屏幕三种模式，避免遮挡画面重要内容。

## 设计风格

界面采用字体排印粗野主义（Typographic Brutalism）美学，使用超大尺寸、重磅无衬线字体营造强烈视觉冲击。纯黑色文字配纯白背景形成高对比度，非对称布局打破常规设计规则。粗几何线条（方括号、下划线）和大量留白创造原始、未经修饰的工业氛围，通过尺度和重量而非色彩建立视觉层次。

## 许可证

MIT License

## 致谢

本项目参考了以下优秀开源项目：[bilibili-API-collect](https://github.com/SocialSisterYi/bilibili-API-collect) 提供了完整的 B 站 API 文档，[danmaku2ass](https://github.com/m13253/danmaku2ass) 提供了弹幕转换的参考实现。感谢这些项目为弹幕导出工具的开发提供了宝贵的技术支持。
